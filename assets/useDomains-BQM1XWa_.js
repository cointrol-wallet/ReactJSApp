import{a as r}from"./vendor-react-C4KqQK9E.js";import{a as f,s as w}from"./index-BRJ5KNqN.js";const D="cointrol:domains:v1",E="cointrol:domains:schemaVersion",d=1,p=[{name:"ETHEREUM SEPOLIA",chainId:11155111,entryPoint:"0x4337084D9E255Ff0702461CF8895CE9E3b5Ff108",paymaster:"0x55E6773E922a5bcb716ac5205ED8005BF543bfE3",bundler:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",rpcUrl:"https://ethereum-sepolia-rpc.publicnode.com",transactionUrl:"https://sepolia.etherscan.io/tx/",createdAt:0,updatedAt:0}],l=new Set;function b(a){const n=[...a,...p];for(const t of l)t(n)}function A(a){return l.add(a),()=>{l.delete(a)}}async function S(){const a=await f(E);return a||d}async function h(a){await w(E,a)}async function I(){const a=await S();a!==d&&(await f(D),a<d&&await h(d))}async function m(){return await I(),await f(D)??[]}async function u(a){await w(D,a),b(a)}async function F(){return[...await m(),...p]}async function U(a){const n=Date.now(),t=await m(),o={chainId:a.chainId,name:a.name,entryPoint:a.entryPoint,paymaster:a.paymaster,bundler:a.bundler,rpcUrl:a.rpcUrl,transactionUrl:a.transactionUrl,createdAt:n,updatedAt:n},e=[...t,o];return await u(e),e}async function M(a,n){const t=await m(),o=Date.now(),e=t.map(i=>i.name===a?{...i,...n,updatedAt:o}:i);return await u(e),e}async function N(a){const t=(await m()).filter(o=>o.name!==a);return await u(t),t}async function _(){await u([])}function R(){const[a,n]=r.useState([]),[t,o]=r.useState(!0),[e,i]=r.useState(null);return r.useEffect(()=>{let c=!1;(async()=>{try{const s=await F();c||(n(s),o(!1))}catch(s){console.error("[Domains] Failed to load:",s),c||(i(s?.message??"Failed to load domains"),o(!1))}})();const y=A(s=>{c||n(s)});return()=>{c=!0,y()}},[]),{domains:a,loading:t,error:e,addDomain:U,updateDomain:M,deleteDomain:N,clearDomain:_}}export{R as u};
