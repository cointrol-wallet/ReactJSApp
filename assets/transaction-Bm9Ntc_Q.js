import{a as o,h as ct,j as t,b as lt}from"./vendor-react-C4KqQK9E.js";import{a as pe,s as _e,h as De,n as ut,i as mt,j as xt,e as ft,g as ht,k as Oe,l as Le,m as pt,q as bt}from"./index-CIWIx-KU.js";import{u as gt}from"./useContacts-DNmaZ8iJ.js";import{u as vt}from"./useContracts-DMMoimvH.js";import{u as yt}from"./useCoinList-DrB-YNYw.js";import{u as Nt}from"./useDomains-CnoqE8XC.js";import{u as jt}from"./useFolioList-GAVeEu_9.js";import{u as wt}from"./useAddressList-BW61usEe.js";import{d as St,h as It,l as Fe,m as Ct}from"./vendor-viem-BanhIei1.js";import"./vendor-qr-BZDEmg8j.js";import"./vendor-firebase-CrtqWl9v.js";import"./useAddresses-Dn19ycjZ.js";const be="cointrol:txns:v1",Be="cointrol:txns:schemaVersion",z=1,he=new Set;function At(r){for(const i of he)i(r)}function Tt(r){return he.add(r),()=>{he.delete(r)}}async function Et(){const r=await pe(Be);return r||z}async function Mt(r){await _e(Be,r)}async function Ht(){const r=await Et();r!==z&&(await pe(be),r<z&&await Mt(z))}async function G(){return await Ht(),await pe(be)??[]}async function ee(r){await _e(be,r),At(r)}async function Rt(){return G()}async function kt(r){const i=Date.now(),d=await G(),m={id:`txn:${crypto.randomUUID?.()??`${i}:${d.length}`}`,chainId:r.chainId,userOpHash:r.userOpHash,transactionHash:r.transactionHash,addressId:r.addressId,coinId:r.coinId,folioId:r.folioId,walletId:r.walletId,createdAt:i,updatedAt:i},h=[...d,m];return await ee(h),h}async function Dt(r,i){const d=await G(),m=Date.now(),h=d.map(T=>T.id===r?{...T,...i,updatedAt:m}:T);return await ee(h),h}async function Ot(r){const d=(await G()).filter(m=>m.id!==r);return await ee(d),d}async function Lt(){await ee([])}function Ft(){const[r,i]=o.useState([]),[d,m]=o.useState(!0),[h,T]=o.useState(null);return o.useEffect(()=>{let w=!1;(async()=>{try{const y=await Rt();w||(i(y),m(!1))}catch(y){console.error("[Txns] Failed to load:",y),w||(T(y?.message??"Failed to load Txns"),m(!1))}})();const L=Tt(y=>{w||i(y)});return()=>{w=!0,L()}},[]),{txns:r,loading:d,error:h,addTxn:kt,updateTxn:Dt,deleteTxn:Ot,clearTxns:Lt}}function Y(r,i){const d=r??0,m=i??0;return d<m?-1:d>m?1:0}function _t(r,i="createdAsc"){const d=[...r];return d.sort((m,h)=>{switch(i){case"createdAsc":return Y(m.createdAt,h.createdAt);case"createdDesc":return Y(h.createdAt,m.createdAt);case"chainIdAsc":return Y(m.chainId,h.chainId);case"chainIdDesc":return Y(h.chainId,m.chainId);default:return 0}}),d}function Bt(r={}){const{txns:i,loading:d,error:m,addTxn:h,updateTxn:T,deleteTxn:w,clearTxns:L}=Ft(),{query:y="",sortMode:k="createdAsc",chainId:F=0}=r;return{txns:o.useMemo(()=>{let S=i;if(y.trim()){const C=y.trim().toLowerCase();S=S.filter(x=>x.userOpHash.toLowerCase().includes(C)||x.transactionHash.toLowerCase().includes(C))}return F&&(S=S.filter(C=>C.chainId===F)),_t(S,k)},[i,y,k,F]),loading:d,error:m,addTxn:h,updateTxn:T,deleteTxn:w,clearTxns:L}}function Vt(r,i){const d=i.trim();if(r==="string"||r==="address")return d;if(r==="bool")return d.toLowerCase()==="true";if(r.startsWith("uint")||r.startsWith("int"))return BigInt(d||"0");if(r.startsWith("bytes")&&!r.endsWith("[]"))return d;if(r.endsWith("[]"))try{return JSON.parse(d||"[]")}catch{throw new Error(`Invalid array JSON for type ${r}`)}return d}function Gt(){const[r,i]=o.useState({}),[d,m]=o.useState(""),[h,T]=o.useState("createdDesc"),[w,L]=o.useState(0),[y,k]=o.useState(""),[F,_]=o.useState(""),[S,C]=o.useState(!1),[x,P]=o.useState(!0),[ge,ve]=o.useState(null),[f,te]=o.useState(null),[Ve,ye]=o.useState(null),[E,ne]=o.useState(null),[A,U]=o.useState(null),[B,We]=o.useState(null),[M,R]=o.useState(""),[se,V]=o.useState({}),[q,Z]=o.useState(""),[Ne,D]=o.useState(null),[je,c]=o.useState(null),[re,J]=o.useState(!1),[we,Se]=o.useState(!1),Ie=ct(),Ce=o.useRef(!1),X=o.useRef(""),ae={1:"Ethereum",11155111:"Sepolia"},{txns:oe,loading:$e,error:Ae,addTxn:Pe,updateTxn:Ue}=Bt({query:d,sortMode:h,chainId:w}),{folios:I,loading:ie,error:Te}=jt({query:"",sortMode:"createdAsc",chainId:w}),{coins:O,loading:de,error:Ee}=yt({query:"",sortMode:"nameAsc",standard:"",chainId:w}),{address:W,loading:Me}=wt({query:"",sortMode:"nameAsc"}),{domains:ce}=Nt(),{contracts:$,loading:le,error:He}=vt(),{contacts:ue,loading:Re}=gt();function qe(e,n){if(n<=0)return e.toString();const s=e<0n,a=s?-e:e,l=10n**BigInt(n),u=a/l;let g=(a%l).toString().padStart(n,"0");g=g.replace(/0+$/,"");const j=u.toString()+(g.length>0?"."+g:"");return s?"-"+j:j}function Ze(e=0,n){return n<=0?BigInt(e):e<0?BigInt(0):BigInt(e*10**n)}o.useEffect(()=>{function e(n){n.target.closest("details")||document.querySelectorAll("details[open]").forEach(a=>{a.removeAttribute("open")})}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),o.useEffect(()=>{if(!S)return;const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[S]),o.useEffect(()=>{S&&I.length===1&&!A&&U(I[0])},[S,I,A]),o.useEffect(()=>{if(Ce.current)return;const e=Ie.state?.prefill;if(e&&!(de||Re||le||ie||Me)){if(Ce.current=!0,e.mode==="transfer"){const n=O.find(u=>u.id===e.coinId)??null,s=e.addressId.replace(/^address:/,""),a=ue.find(u=>u.id===s)??null,p=I.find(u=>u.chainId===n?.chainId)??null,l=W.findIndex(u=>u.id===e.addressId);te(n),ye(a),p&&U(p),P(!0),k("Send or Approve Coins"),_("Select any coin and then choose an option."),R("transfer"),l!==-1&&i({to:{mode:"address",manual:"",selectedIndex:l}}),C(!0)}else if(e.mode==="contract"){const n=e.addressId.replace(/^address:/,""),s=$.find(a=>a.id===n)??null;ne(s),P(!1),k("Use a Smart Contract"),_("Select any contract and then choose a function"),e.functionName&&(X.current=e.functionName),C(!0)}}},[Ie.state,de,Re,le,ie,Me,O,ue,$,I,W]);function me(){te(null),ye(null),ne(null),U(null),R(""),V({}),i({}),Z(""),D(null),c(null),ve(null)}function Je(){me(),P(!1),k("Use a Smart Contract"),_("Select any contract and then choose a function"),C(!0)}function Xe(){me(),P(!0),k("Send or Approve Coins"),_("Select any coin and then choose an option."),C(!0)}function xe(){C(!1),me()}function Ke(e){return JSON.stringify(e,(n,s)=>typeof s=="bigint"?s.toString():s,2)}function Qe(e){const n=r[e];if(!n)return"";if(n.mode==="manual")return(n.manual??"").trim();const s=n.selectedIndex;if(s==null)return"";if(n.mode==="address"){const a=W[s];if(!a)return"";if(a.isContact){const p=a.id.replace(/^address:/,""),l=ue.find(b=>b.id===p);return l?.wallets?.length?(l.wallets.find(b=>b.chainId===B?.chainId)?.address??"").trim():""}else return($.find(l=>l.id===a.id)?.address??"").trim()}return n.mode==="coin"?(O[s]?.address??"").trim():n.mode==="folio"?(I[s]?.address??"").trim():""}function Ye(e){r[e]||i(n=>({...n,[e]:{mode:"manual",manual:"",selectedIndex:null}}))}async function ze(){var e;x?e=Ve?.id:e=E?.id;const n=A?.wallet,s=n?.length;var a=-1;if(f&&s&&s>0)for(let l=0;l<s;l++)n[l].coin==f.id&&(a=l);const p={userOpHash:ge?.userOpHash,transactionHash:ge?.hash,chainId:A?.chainId,addressId:e,coinId:f?.id,folioId:A?.id,walletId:a};await Pe({...p}),xe()}async function Ge(){const e=oe.filter(n=>!n.transactionHash);if(e.length!==0){Se(!0);try{for(const n of e){const s=I.find(a=>a.id===n.folioId);if(!(!s?.address||!n.userOpHash))try{const a=await pt.getTxReceipt(s.address,n.userOpHash);a.success&&a.txHash&&await Ue(n.id,{transactionHash:a.txHash})}catch{}}}finally{Se(!1)}}}const H=o.useMemo(()=>{if(x)switch(f?.type){case"ERC20":return De;case"ERC721":return xt;case"ERC1155":return mt;case"NATIVE":return ut;default:return De}else return ft(E?.metadata)},[f,x,E]),et=o.useMemo(()=>{if(f!=null&&A!=null){const n=A?.wallet,s=n?.length;var e=0n;if(s&&s>0)for(let a=0;a<s;a++)n[a].coin===f.id&&(e=n[a].balance);return qe(e,f.decimals)}else return""},[f,A]),N=o.useMemo(()=>ht(H),[H]),K=o.useMemo(()=>N.find(n=>n.name===M)?.stateMutability==="payable",[N,M]),tt=re||!x&&K&&!(q||"").trim(),Q=o.useMemo(()=>N.filter(e=>e.stateMutability?e.stateMutability==="nonpayable"||e.stateMutability==="payable":!e.constant),[N]),nt=o.useMemo(()=>N.filter(e=>e.stateMutability?e.stateMutability==="view"||e.stateMutability==="pure":e.constant===!0),[N]);o.useEffect(()=>{!B&&ce.length&&We(ce[0])},[B,ce]),o.useEffect(()=>{R(""),V({}),Z(""),D(null),c(null)},[H]),o.useEffect(()=>{!M&&N.length>0&&(X.current?(R(X.current),X.current=""):Q.length>0?R(Q[0].name):R(N[0].name),x&&R("transfer"))},[M,N,Q]),o.useEffect(()=>{M&&(V({}),Z(""),i({}),D(null),c(null))},[M]);const v=o.useMemo(()=>N.find(e=>e.name===M),[N,M]);function st(e,n){V(s=>({...s,[e]:n}))}function fe(){return v?v.inputs.map((e,n)=>{const s=Le(e,n);if(e.type==="address")return Qe(s);if(s==="value"&&x)return Ze(Number(se[s]),f?.decimals??18);const a=se[s]??"";return Vt(e.type,a)}):[]}const{startFlow:rt}=Oe();async function at(){if(c(null),D(null),!H){c("No ABI found for selected contract");return}if(!E&&!x){c("No contract selected");return}if(K&&!(q||"").trim()){c("Enter a payable value");return}if(!f&&x){c("No token selected");return}if(!v){c("No function selected");return}if(!re)try{J(!0);const e=x&&f?.type==="NATIVE";let n=null,s=0n,a="0x";if(e){if(!v){c("No function selected");return}const g=fe(),j=g?.[0]?.trim(),ke=g?.[1];if(!j||!j.startsWith("0x")){c("Invalid _to address");return}if(ke==null){c("Invalid _value amount");return}n=j,s=BigInt(ke),a="0x"}else{if(!H){c("No ABI found");return}if(!v){c("No function selected");return}const g=fe();if(a=Fe({abi:H,functionName:v.name,args:g}),x){const j=(f?.address??"").trim();if(!j.startsWith("0x")){c("Coin has no valid contract address");return}n=j,s=0n}else{const j=(E?.address??"").trim();if(!j.startsWith("0x")){c("Contract has no valid address");return}n=j,s=K?Ct((q||"0").trim()):0n}}if(!n){c("Could not resolve destination address");return}const p=Fe({abi:bt,functionName:"execute",args:[n,s,a]});await rt({folio:A,encoded:p,domain:B});const b=Oe.getState().status;if(ve(b),b.phase==="failed"){c(b.message??"Transaction failed");return}ze()}catch(e){console.error(e),c(e?.message??"Failed to build calldata")}finally{J(!1)}}async function ot(){if(c(null),D(null),!H){c("No ABI found for selected contract");return}if(!E&&!x){c("No contract selected");return}if(!f&&x){c("No token selected");return}if(!v){c("No function selected");return}if(!(v.stateMutability==="view"||v.stateMutability==="pure")){c("Selected function is not read-only");return}if(!re)try{J(!0);const s=fe(),a=St({transport:It(B?.rpcUrl)});var n;x?n=f?.address:n=E?.address;const p=await a.readContract({address:n,abi:H,functionName:v.name,args:s});D(Ke(p))}catch(s){console.error(s),c(s?.message??"Failed to read from RPC")}finally{J(!1)}}const it=v&&(v.stateMutability==="view"||v.stateMutability==="pure"),dt=!!H&&N.length>0;return $e?t.jsx("div",{className:"p-4",children:"Loading transactions…"}):Ae?t.jsx("div",{className:"p-4 text-red-600",children:Ae}):t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsx("h1",{className:"shrink-0 text-2xl leading-tight font-semibold text-foreground",children:"Transactions"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("input",{className:"h-9 w-full rounded-md border border-border bg-card px-2 text-sm text-foreground placeholder:text-muted sm:max-w-md",placeholder:"Search by userOpHash or transactionHash…",value:d,onChange:e=>m(e.target.value)}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[t.jsx("select",{className:"h-9 w-[100px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:w,onChange:e=>L(Number(e.target.value)),children:Object.entries(ae).map(([e,n])=>t.jsx("option",{value:e,children:n},e))}),t.jsxs("select",{className:"h-9 w-[140px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:h,onChange:e=>T(e.target.value),children:[t.jsx("option",{disabled:!0,children:"Primary sort"}),t.jsx("option",{value:"nameAsc",children:"Name (A → Z)"}),t.jsx("option",{value:"nameDesc",children:"Name (Z → A)"}),t.jsx("option",{value:"coinSymbolAsc",children:"Symbol (A → Z)"}),t.jsx("option",{value:"coinSymbolDesc",children:"Symbol (Z → A)"}),t.jsx("option",{value:"addressAsc",children:"Address (A → Z)"}),t.jsx("option",{value:"addressDesc",children:"Address (Z → A)"}),t.jsx("option",{value:"chainIdAsc",children:"Chain ID (Low → High)"}),t.jsx("option",{value:"chainIdDesc",children:"Chain ID (High → Low)"}),t.jsx("option",{value:"createdDesc",children:"Newest first"}),t.jsx("option",{value:"createdAsc",children:"Oldest first"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[t.jsx("button",{className:"h-9 rounded-md border border-border bg-card px-3 text-sm",onClick:Xe,children:" Send coins "})," ",t.jsx("button",{className:"h-9 rounded-md border border-border bg-card px-3 text-sm",onClick:Je,children:" Use a smart contract "}),t.jsxs("button",{className:"h-9 rounded-md border border-border bg-card px-3 text-sm",onClick:Ge,disabled:we,children:[" ",we?"Refreshing…":"Refresh TX hashes"," "]})]})]}),oe.length===0?t.jsx("div",{className:"text-sm text-muted",children:"No transactions"}):t.jsx("ul",{className:"space-y-2",children:oe.map(e=>{const n=I.find(g=>g.id===e.folioId),s=O.find(g=>g.id===e.coinId),a=W.find(g=>g.id===e.addressId),p=n?.name??e.folioId,l=s?.symbol??"—",u=n&&ae[n.chainId]?ae[n.chainId]:n?`Chain ${n.chainId}`:"Unknown chain",b=a?.name??"";return t.jsx("li",{className:"w-full",children:t.jsx("div",{className:"w-full rounded-lg border border-border bg-card px-4 py-3",children:t.jsxs("div",{className:"grid gap-3 sm:gap-x-6 sm:gap-y-2 sm:grid-cols-[160px_90px_minmax(0,1fr)_110px] sm:items-start",children:[t.jsxs("div",{className:"min-w-0 font-medium",children:["Sender: ",p]}),t.jsxs("div",{className:"min-w-0 text-xs text-muted-foreground sm:pt-1",children:[t.jsx("div",{children:l}),t.jsx("div",{children:u})]}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Receiver: ",b]}),t.jsxs("div",{className:"mt-0.5 text-xs text-muted-foreground font-mono break-words sm:truncate sm:break-normal",title:e.transactionHash??"",children:["Tx: ",e.transactionHash]}),t.jsxs("div",{className:"mt-0.5 text-xs text-muted-foreground font-mono break-words sm:truncate sm:break-normal",title:e.userOpHash??"",children:["UserOp: ",e.userOpHash]})]}),t.jsx("div",{className:"justify-self-start sm:justify-self-end",children:t.jsx("button",{className:"rounded-md border border-border bg-background px-2 py-1 text-xs hover:bg-muted",onClick:()=>{e.transactionHash&&window.open(`https://sepolia.etherscan.io/tx/${e.transactionHash}`,"_blank","noopener,noreferrer")},children:"View on Etherscan"})})]})})},e.id)})}),S?lt.createPortal(t.jsx("div",{className:"bg-background/80 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&xe()},style:{position:"fixed",inset:0,zIndex:2147483647,display:"flex",alignItems:"center",justifyContent:"center",padding:16},children:t.jsxs("div",{className:"bg-background",onMouseDown:e=>e.stopPropagation(),style:{width:"100%",maxWidth:448,borderRadius:12,padding:16,boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},children:[t.jsx("h2",{className:"mb-3 text-base font-semibold",children:y}),t.jsx("h3",{className:"mb-4 text-xs font-semibold",children:F}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsx("label",{className:"text-xs font-medium",children:"Folio"})}),t.jsxs("select",{className:"w-full rounded-md border px-2 py-1 text-sm",value:A?.id??"",onChange:e=>U(I.find(n=>String(n.id)===e.target.value)??null),children:[t.jsx("option",{value:"",children:ie?"Loading...":"Select folio"}),I.map(e=>t.jsxs("option",{value:e.id,children:[e.name," (",e.address,")"]},e.id))]}),Te&&t.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Error: ",Te]})]}),!x&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsx("label",{className:"text-xs font-medium",children:"Contract"})}),t.jsxs("select",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:E?.id??"",onChange:e=>ne($.find(n=>String(n.id)===e.target.value)??null),children:[t.jsx("option",{value:"",children:le?"Loading...":"Select contract"}),$.map(e=>t.jsxs("option",{value:e.id,children:[e.name," (",e.address,")"]},e.id))]}),He&&t.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Error: ",He]})]}),x&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsx("label",{className:"text-xs font-medium",children:"Coin"})}),t.jsxs("select",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:f?.id??"",onChange:e=>te(O.find(n=>String(n.id)===e.target.value)??null),children:[t.jsx("option",{value:"",children:de?"Loading...":"Select coin"}),O.map(e=>t.jsxs("option",{value:e.id,children:[e.name," (",e.symbol,")"]},e.id))]}),Ee&&t.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Error: ",Ee]})]}),x&&f&&t.jsx("div",{className:"text-xs text-muted space-y-1",children:t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Balance:"})," ",et," ",f.symbol]})}),dt?t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsx("label",{className:"text-xs font-medium",children:"Function"})}),t.jsxs("select",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:M,onChange:e=>{R(e.target.value),V({}),D(null),c(null)},children:[t.jsx("optgroup",{label:"Write (nonpayable/payable)",children:Q.map(e=>t.jsxs("option",{value:e.name,children:[e.name,"(",e.inputs.map(n=>n.type).join(","),")"]},`w-${e.name}`))}),t.jsx("optgroup",{label:"Read (view/pure)",children:nt.map(e=>t.jsxs("option",{value:e.name,children:[e.name,"(",e.inputs.map(n=>n.type).join(","),")"]},`r-${e.name}`))})]})]}):E&&t.jsxs("p",{className:"text-xs text-red-600",children:["No valid ABI found for this contract. Ensure you stored the ABI as either an array or an object with an ",t.jsx("code",{children:"abi"})," field."]}),!x&&K&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsxs("label",{className:"text-xs font-medium",children:["Payable value ",t.jsx("span",{className:"text-muted",children:"(ETH)"})]})}),t.jsx("div",{className:"min-w-0",children:t.jsx("input",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:q,onChange:e=>Z(e.target.value),placeholder:"0.0"})})]}),v?.inputs.map((e,n)=>{const s=Le(e,n);if(e.type==="address"){r[s]||Ye(s);const a=r[s]??{mode:"manual",manual:"",selectedIndex:null},p=a.mode==="address"?W:a.mode==="coin"?O:a.mode==="folio"?I:[];return t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsxs("label",{className:"text-xs font-medium",children:[s," ",t.jsx("span",{className:"text-muted",children:"(address)"})]})}),t.jsx("div",{className:"min-w-0",children:t.jsxs("select",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:a.mode,onChange:l=>{const u=l.target.value;i(b=>({...b,[s]:{mode:u,manual:"",selectedIndex:null}}))},children:[t.jsx("option",{value:"manual",children:"Manual"}),t.jsx("option",{value:"address",children:"Address"}),t.jsx("option",{value:"coin",children:"Coin"}),t.jsx("option",{value:"folio",children:"Folio"})]})}),t.jsx("div",{className:"min-w-0",children:a.mode==="manual"?t.jsx("input",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:a.manual,onChange:l=>{const u=l.target.value;i(b=>({...b,[s]:{...a,manual:u}}))},placeholder:"0x…"}):t.jsxs("select",{className:"h-9 w-[180px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:a.selectedIndex??"",onChange:l=>{const u=l.target.value;i(b=>({...b,[s]:{...a,selectedIndex:u===""?null:Number(u)}}))},children:[t.jsxs("option",{value:"",children:["Select ",a.mode]}),p.map((l,u)=>t.jsx("option",{value:u,children:l.name},`${s}-${u}`))]})})]},s)}return t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"min-w-0",children:t.jsxs("label",{className:"text-xs font-medium",children:[s," ",t.jsxs("span",{className:"text-muted",children:["(",e.type,")"]})]})}),t.jsx("div",{className:"min-w-0",children:t.jsx("input",{className:"h-9 w-[110px] rounded-md border border-border bg-card px-2 text-sm text-foreground",value:se[s]??"",onChange:a=>st(s,a.target.value),placeholder:e.type.endsWith("[]")?`JSON array for ${e.type}`:e.type==="bool"?"true / false":""})})]},s)}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs",onClick:xe,children:" Cancel "})," ",it?t.jsx("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs",onClick:ot,children:" Query "}):t.jsx("button",{type:"button",disabled:tt,className:"rounded-md bg-primary px-3 py-1 text-xs font-medium text-background",onClick:at,children:" Submit "})]}),Ne&&t.jsx("div",{className:"text-xs text-primary border border-primary rounded-md p-2",children:t.jsx("pre",{children:Ne})}),je&&t.jsx("div",{className:"text-xs text-red-600 border border-red-200 rounded-md p-2",children:je})]})}),document.body):null]})}export{Gt as Transactions};
