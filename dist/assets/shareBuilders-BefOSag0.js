import{b,j as t}from"./vendor-react-C4KqQK9E.js";import{Q as x}from"./vendor-qr-BZDEmg8j.js";import{f as n}from"./index-CIWIx-KU.js";const f=2800;function j({payload:e,onClose:a}){const s=n(e),d=s.length>f;return typeof document>"u"?null:b.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{onClick:a,style:{position:"fixed",inset:0,zIndex:2147483646,background:"rgba(0,0,0,0.35)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)"}}),t.jsxs("div",{role:"dialog","aria-modal":"true",className:`
          rounded-2xl
          border border-neutral-200
          bg-[#fffdf7]
          text-neutral-900
          shadow-2xl
        `,style:{position:"fixed",zIndex:2147483647,top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(420px, calc(100vw - 32px))",padding:20},onClick:r=>r.stopPropagation(),children:[t.jsxs("div",{className:"text-lg font-semibold mb-3 text-center",children:["Share ",e.t,": ",e.data.name]}),t.jsx("div",{className:"mt-4 flex justify-end gap-2"}),t.jsx("br",{}),t.jsx("div",{className:"mt-2 flex justify-center",children:d?t.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700 max-w-xs text-center",children:"This contract's data is too large to encode as a QR code, even after stripping the ABI. Try reducing the amount of metadata stored on this contract."}):t.jsx("div",{className:"bg-white p-3 rounded-lg border shadow-sm",children:t.jsx(x,{value:s,size:240})})}),t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsx("button",{type:"button",className:"rounded bg-black px-3 py-2 text-white",onClick:a,children:"Close"})})]})]}),document.body)}function c(e){const a=new Map;for(const s of e){const d=`${s.chainId}:${s.address.toLowerCase()}`;a.has(d)||a.set(d,{chainId:s.chainId,address:s.address})}return[...a.values()]}function I(e){return{v:1,t:"contact",data:{name:e.name,surname:e.surname,wallets:e.wallets?c(e.wallets):void 0},meta:{createdAt:Date.now(),source:"Cointrol"}}}const l=2800;function y(e){const a={name:e.name,address:e.address,chainId:e.chainId},s=()=>({createdAt:Date.now(),source:"Cointrol"});if(e.metadata){const r={v:1,t:"contract",data:{...a,metadata:e.metadata},meta:s()};if(n(r).length<=l)return r;const{ABI:m,abi:u,...o}=e.metadata,h=m!==void 0||u!==void 0;if(Object.keys(o).length>0){const i={v:1,t:"contract",data:{...a,metadata:o,abiOmitted:h||void 0},meta:s()};if(n(i).length<=l)return i}}const d=!!(e.metadata?.ABI||e.metadata?.abi);return{v:1,t:"contract",data:{...a,abiOmitted:d||void 0},meta:s()}}function C(e,a,s){const d=c(a.map(r=>({chainId:r.chainId,address:r.address})));return{v:1,t:"profile",data:{name:e,wallets:d},meta:{createdAt:Date.now(),source:"Cointrol"}}}function A(e){return{v:1,t:"coin",data:{name:e.name,symbol:e.symbol,decimals:e.decimals,chainId:e.chainId,address:e.address,type:e.type},meta:{createdAt:Date.now(),source:"Cointrol"}}}export{j as S,I as a,y as b,A as c,C as d};
