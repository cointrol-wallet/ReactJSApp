import{a as C}from"./vendor-react-C4KqQK9E.js";import{K as w,L as A,M as b,N as g,O as h,P as I}from"./index-CIWIx-KU.js";function S(){const[l,o]=C.useState([]),[t,e]=C.useState(!0),[s,f]=C.useState(null);return C.useEffect(()=>{let c=!1;(async()=>{try{const n=await w();c||(o(n),e(!1))}catch(n){console.error("[Coins] Failed to load:",n),c||(f(n?.message??"Failed to load coins"),e(!1))}})();const u=A(n=>{c||o(n)});return()=>{c=!0,u()}},[]),{coins:l,loading:t,error:s,addCoin:I,updateCoin:h,deleteCoin:g,clearCoins:b}}function D(l,o="createdAsc"){const t=[...l];return o==="nameAsc"?t.sort((e,s)=>e.name.toLocaleLowerCase().localeCompare(s.name.toLocaleLowerCase())):o==="nameDesc"?t.sort((e,s)=>s.name.toLocaleLowerCase().localeCompare(e.name.toLocaleLowerCase())):o==="createdAsc"?t.sort((e,s)=>e.createdAt-s.createdAt):o==="createdDesc"?t.sort((e,s)=>s.createdAt-e.createdAt):o==="chainIdAsc"?t.sort((e,s)=>e.chainId-s.chainId):o==="chainIdDesc"?t.sort((e,s)=>s.chainId-e.chainId):o==="symbolAsc"?t.sort((e,s)=>e.symbol.toLocaleLowerCase().localeCompare(s.symbol.toLocaleLowerCase())):o==="symbolDesc"&&t.sort((e,s)=>s.symbol.toLocaleLowerCase().localeCompare(e.symbol.toLocaleLowerCase())),t}function x(l={}){const{coins:o,loading:t,error:e,addCoin:s,updateCoin:f,deleteCoin:c,clearCoins:u}=S(),{query:n="",sortMode:y="nameAsc",tags:d=[],tagMode:p="any",chainId:L=0,standard:m=""}=l;return{coins:C.useMemo(()=>{let a=o;if(n.trim()){const r=n.trim().toLowerCase();a=a.filter(i=>i.name.toLowerCase().includes(r)||i.address.toLowerCase().includes(r)||i.symbol.toLowerCase().includes(r))}return m&&(a=a.filter(r=>r.type===m)),L!=0&&(a=a.filter(r=>r.chainId===L)),d&&d.length>0&&(p=="any"?a=a.filter(r=>r.tags?.some(i=>d.includes(i))):a=a.filter(r=>d.every(i=>r.tags?.includes(i)))),D(a,y)},[o,n,y,d,p,m,L]),loading:t,error:e,addCoin:s,updateCoin:f,deleteCoin:c,clearCoins:u}}export{x as u};
